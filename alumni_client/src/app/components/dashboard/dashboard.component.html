<div class="dashboard-container">
  <h2>ğŸ“ Alumni Insights Dashboard</h2>

  <!-- ğŸ” FILTERS -->
  <div class="filters">
    <!-- Major Filter -->
    <mat-form-field appearance="outline">
      <mat-label>Major</mat-label>
      <mat-select [(ngModel)]="selectedMajor" (selectionChange)="filterData()">
        <mat-option value="">All</mat-option>
        <mat-option *ngFor="let major of majors" [value]="major">
          {{ major }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <!-- Graduation Year Filter -->
    <mat-form-field appearance="outline">
      <mat-label>Graduation Year</mat-label>
      <mat-select [(ngModel)]="selectedYear" (selectionChange)="filterData()">
        <mat-option value="">All</mat-option>
        <mat-option *ngFor="let year of years" [value]="year">
          {{ year }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <!-- Company Filter -->
    <mat-form-field appearance="outline">
      <mat-label>Company</mat-label>
      <mat-select [(ngModel)]="selectedCompany" (selectionChange)="filterData()">
        <mat-option value="">All</mat-option>
        <mat-option *ngFor="let company of companies" [value]="company">
          {{ company }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <!-- ğŸ“Š KPI CARDS -->
  <div class="kpi-grid">
    <mat-card class="kpi-card total">
      Total Alumni<br />
      <b>{{ totalAlumni() }}</b>
    </mat-card>

    <mat-card class="kpi-card majors">
      Unique Majors<br />
      <b>{{ totalMajors() }}</b>
    </mat-card>

    <mat-card class="kpi-card companies">
      Total Companies<br />
      <b>{{ totalCompanies() }}</b>
    </mat-card>

    <mat-card class="kpi-card roles">
      Distinct Roles<br />
      <b>{{ totalRoles() }}</b>
    </mat-card>
  </div>

  <!-- ğŸ“ˆ CHARTS -->
  <div class="charts">

    <mat-card class="chart-card">
      <h3>ğŸ“ˆ Graduation Trends Over Time</h3>
      <canvas id="gradTrend"></canvas>
    </mat-card>

    <mat-card class="chart-card">
      <h3>ğŸ© Major-wise Alumni Distribution</h3>
      <canvas id="majorPie"></canvas>
    </mat-card>

    <mat-card class="chart-card">
      <h3>ğŸ“Š Top Majors by Alumni Count</h3>
      <canvas id="topMajors"></canvas>
    </mat-card>

    <mat-card class="chart-card">
      <h3>ğŸ‘©â€ğŸ’» Role Distribution Across Majors</h3>
      <canvas id="roleDist"></canvas>
    </mat-card>

      <mat-card class="chart-card full-width">
      <h3>ğŸ¢ Top Hiring Companies</h3>
      <canvas id="topCompanies"></canvas>
    </mat-card>

     <mat-card class="chart-card full-width">
      <h3>ğŸ¢ Alumni Company Spread</h3>
      <canvas id="alumniLocation"></canvas>
    </mat-card>

  </div>

  <!-- ğŸ”® Predictive Analysis Section -->
<mat-card class="predict-card full-width">
  <h2>ğŸ”® Predictive Analysis</h2>

  <mat-accordion multi>

    <!-- 1ï¸âƒ£ Prediction Question -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Which companies are most likely to hire GHU alumni next year?
        </mat-panel-title>
      </mat-expansion-panel-header>

      <!-- Two forecast charts -->
      <div class="predict-charts">
        <canvas id="forecastTopCompanies"></canvas>
        <canvas id="trendTopCompanies"></canvas>
      </div>

      <!-- Textual insight -->
      <!-- <div class="prediction-text">
        <p>Based on historical placement trends, the hiring demand for these companies is projected to grow. Google and Microsoft show an upward hiring curve, while IBM is stabilizing. Amazon shows a mild decline compared to 2023â€“24.</p>
      </div> -->
      <div class="prediction-text">
        <p>{{ companyPredictionText }}</p>
      </div>

    </mat-expansion-panel>

    <!-- 2ï¸âƒ£ Prediction Question -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Which majors are expected to have the highest employment success next year?
        </mat-panel-title>
      </mat-expansion-panel-header>

      <div class="predict-charts">
        <canvas id="forecastMajorEmployment"></canvas>
        <canvas id="trendMajorEmployment"></canvas>
      </div>

      <div class="prediction-text">
        <p>{{ majorPredictionText }}</p>
      </div>
    </mat-expansion-panel>

    <!-- 3ï¸âƒ£ Prediction Question -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          What cities will alumni most likely work in next year?
        </mat-panel-title>
      </mat-expansion-panel-header>

      <div class="predict-charts">
        <canvas id="forecastLocations"></canvas>
        <canvas id="trendLocations"></canvas>
      </div>

      <div class="prediction-text">
        <p>{{ companyPredictionText }}</p>
      </div>
    </mat-expansion-panel>

  </mat-accordion>
</mat-card>

</div>
